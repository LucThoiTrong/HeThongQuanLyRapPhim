<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>C·∫≠p nh·∫≠t Combo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f4f7fc;
        }

        .container {
            max-width: 600px;
            margin-top: 60px;
            padding: 30px;
            border-radius: 10px;
            background-color: #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        h3 {
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .btn-custom {
            background-color: #3498db;
            color: white;
            border-radius: 5px;
        }

        .btn-custom:hover {
            background-color: #2980b9;
        }

        .form-floating > label {
            color: #777;
        }

        .form-floating input:focus ~ label {
            color: #2980b9;
        }

        a {
            display: inline-block;
            margin-top: 20px;
            color: #3498db;
            font-size: 1rem;
        }

        a:hover {
            text-decoration: underline;
        }

        .alert-success {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <h3 class="text-center">C·∫≠p nh·∫≠t combo b·∫Øp n∆∞·ªõc</h3>

    <!-- Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu c√≥ -->
    <div th:if="${message}" class="alert alert-success text-center" th:text="${message}"></div>

    <form th:action="@{/combos/update/{id}(id=${comboBapNuoc.idComboBapNuoc})}" th:object="${comboBapNuoc}" method="post" novalidate>
        <input type="hidden" th:field="*{idComboBapNuoc}">

        <div class="form-floating mb-3">
            <input type="text" th:field="*{tenCombo}" class="form-control" id="tenCombo" placeholder="T√™n combo">
            <label for="tenCombo">T√™n combo</label>
        </div>

        <div class="form-floating mb-3">
            <input type="text" th:field="*{moTaCombo}" class="form-control" id="moTaCombo" placeholder="M√¥ t·∫£ combo">
            <label for="moTaCombo">M√¥ t·∫£ combo</label>
        </div>

        <div class="form-floating mb-4">
            <input type="text" th:field="*{giaTien}" class="form-control" id="giaTien" placeholder="Gi√° ti·ªÅn">
            <label for="giaTien">Gi√° ti·ªÅn (VND)</label>
        </div>

        <div class="text-center">
            <button type="submit" class="btn btn-custom px-4">üíæ L∆∞u</button>
        </div>

        <div class="text-center">
            <a th:href="@{/combos/}">‚Üê Quay l·∫°i danh s√°ch combo</a>
        </div>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('form');
        const tenComboInput = document.querySelector('[name="tenCombo"]');
        const moTaComboInput = document.querySelector('[name="moTaCombo"]');
        const giaTienInput = document.querySelector('[name="giaTien"]');

        form.addEventListener('submit', function (event) {
            document.querySelectorAll('.error-message').forEach(e => e.remove());
            let isValid = true;

            function showError(inputElement, message) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'text-danger error-message mt-1';
                errorDiv.textContent = message;
                inputElement.closest('.form-floating').appendChild(errorDiv);
            }

            if (!tenComboInput.value.trim()) {
                showError(tenComboInput, 'T√™n combo kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng');
                isValid = false;
            }
            if (!moTaComboInput.value.trim()) {
                showError(moTaComboInput, 'M√¥ t·∫£ combo kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng');
                isValid = false;
            }
            const giaTien = parseFloat(giaTienInput.value);
            if (!giaTienInput.value.trim()) {
                showError(giaTienInput, 'Gi√° ti·ªÅn kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng');
                isValid = false;
            } else if (isNaN(giaTien) || giaTien <= 0) {
                showError(giaTienInput, 'Gi√° ti·ªÅn ph·∫£i l√† s·ªë v√† l·ªõn h∆°n 0');
                isValid = false;
            }

            if (!isValid) {
                event.preventDefault();
            }
        });
    });
</script>

</body>
</html>